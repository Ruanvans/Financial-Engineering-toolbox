/* this file's purpose is to house all the functions needed for
calculating the price of forward contracts as well as their values
at intermediate times. There is also a function that is used for
calculating the present value of an investment */

/* these code functions help a user in calculations related to basic fixed
 income securities, they are intended to be used in a */

#include "pch.h"
#include <iostream>
#include <algorithm>
#include <cmath>
#include <numeric>
#include <vector>

using namespace std;
void present_value(void)
{

	double interest;
	int payments;
	double payment_amount;
	//double total_payment;


	cout << "Please enter an interest rate: ";
	cin >> interest;

	cout << "Please enter the amount of payments: ";
	cin >> payments;

	cout << "Please enter the payment amount: ";
	cin >> payment_amount;


	vector<double> discount(payments);

	vector<int> t(payments);

	iota(t.begin(), t.end(), 0);

	transform(t.begin(), t.end(), discount.begin(), [&interest](int t) {return 1 / pow((1 + interest), t); });

	double total = accumulate(discount.begin(), discount.end(), 0.0);

	cout << fixed;
	cout.precision(2);
	cout << "Present value: " << total * payment_amount/ 1000000 << " million" << endl;
}

void fcontract_intermediate(void)
{
	double initial_price;
	double current_price;
	double interest;
	// this is the rate of which is compounded
	int compound_rate;

	cout << "please enter the initial price: ";
	cin >> initial_price;

	cout << "please enter the current price: ";
	cin >> current_price;

	cout << "please enter the interest rate: ";
	cin >> interest;

	cout << "please enter the rate at which the interest is compounded: ";
	cin >> compound_rate;

	double time_0 = initial_price * pow((1 + (interest / compound_rate)), 2);
	double time_t = current_price * (1 + (interest / compound_rate));

	double discount_factor = (1 / (1+(interest / compound_rate)));

	double  forward_price = (time_t - time_0)*discount_factor;

	cout << "intermediate price is: " << forward_price << endl;
}

void fcontract()
{
	// this function is for calculating the value of a forward contract at a theoretical point in time
	double price;
	double interest;
	// this value is how many times interest is applied annually
	int compound_rate;
	//theoretical time
	int theoretical_time;

	cout << "enter a price: ";
	cin >> price;

	cout << "enter an interest rate: ";
	cin >> interest;

	cout << "enter a compound rate: ";
	cin >> compound_rate;

	cout << "enter a theoretical time: ";
	cin >> theoretical_time;

		double value = price* pow((1 + (interest / compound_rate)), theoretical_time);

		cout << "theoretical value for forward contract is: " << value << endl;

}

int main()
{
	//present_value();
	//fcontract_intermediate();
	//fcontract();
	return 0;
}
